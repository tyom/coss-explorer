#!/usr/local/bin/node

var cli = require('commander');
var generators = require('../lib/generators');

var success = false;

cli
  .version('0.0.1')
  .usage('<command> [options]');
cli
  .command('url <url>')
  .description('Fetch source from URL and present as tree')
  .action(function(url) {
    // if(source.match('^https?'))
    if(!url.match(/^https?/)) {
      url = 'http://' + url;
    }
    generators.fromUrl(url, cli.css);
    success = true;
  });
cli
  .option('-f, --file [source]',  'HTML source file')
  .option('-u, --url [source]',   'HTML source URL')
  .option('-c, --css [selector]', 'Root CSS selector (defaults to `body`)', 'body')
  .parse(process.argv);

if(!success) {
  cli.help();
}