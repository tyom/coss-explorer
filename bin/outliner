#!/usr/local/bin/node

var cli = require('commander');
var generators = require('../lib/generators');

var success = false;

cli
  .version('0.0.1')
  .usage('<command> [options]');
// Commands
cli
  .command('url <url>')
  .description('Fetch source from URL and present as tree')
  .action(function(url) {
    if(!url.match(/^https?/)) {
      url = 'http://' + url;
    }

    generators.fromUrl(url, cli);
    success = true;
  });
// Options
cli
  .option('-c, --css [selector]', 'Root CSS selector (default: `body`)', 'body')
  .option('-o, --output [filename]',  'Save output to a file')
  .option('-f, --format [format]',  'Output format for file. `text` or `html` (default: `text`)', 'text')
  .parse(process.argv);

if(!success) {
  cli.help();
}